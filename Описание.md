
```
@startuml

' Интерфейс для банка
interface IBank {
    + AuthorizeClient(client: Client): void
    + GetClientByPAN(pan: string): Client
    + TransferFunds(fromClient: Client, toClient: Client, amount: float): void
}

' Базовый класс для человека
abstract class Person {
    - Name: string
    + Authenticate(): void
}

' Клиент банка
class Client extends Person {
    - Id: int
    - PAN: string
    - Balance: float
    + DepositCash(amount: float): void
    + WithdrawCash(amount: float): void
    + Authenticate(): void
}

' Старый банк
class Bank {
    - BankName: string
    - Clients: List<Client>
    + AddClient(client: Client): void
    + GetClientByPAN(pan: string): Client
    + AuthorizeClient(client: Client): void
    + TransferFunds(fromClient: Client, toClient: Client, amount: float): void
}

' Адаптер для старого банка
class BankAdapter implements IBank {
    - _bank: Bank
    + AuthorizeClient(client: Client): void
    + GetClientByPAN(pan: string): Client
    + TransferFunds(fromClient: Client, toClient: Client, amount: float): void
}

' Новый банк
class NewBank {
    - Clients: Dictionary<string, Client>
    + AddClient(client: Client): void
    + ValidateClientPAN(pan: string): bool
    + FetchClientByPAN(pan: string): Client
    + PerformTransfer(fromPAN: string, toPAN: string, amount: float): void
}

' Адаптер для нового банка
class NewBankAdapter implements IBank {
    - _newBank: NewBank
    + AuthorizeClient(client: Client): void
    + GetClientByPAN(pan: string): Client
    + TransferFunds(fromClient: Client, toClient: Client, amount: float): void
}

' Банкомат
class ATM {
    - ID: int
    - Location: string
    - Condition: string
    - Bank: IBank
    - CurrentClient: Client
    + Operate(): void
    + InsertCard(pan: string): void
    + PerformWithdrawal(amount: float): void
    + PerformDeposit(amount: float): void
    + TransferFunds(recipientPAN: string, amount: float): void
}

' Программа
class Program {
    + Main(): void
}

' Связи между классами
Person <|-- Client
IBank <|.. BankAdapter
IBank <|.. NewBankAdapter
Bank <|.. BankAdapter
NewBank <|.. NewBankAdapter
IBank <-- ATM : uses
Client <-- ATM : CurrentClient
Program --> ATM : creates

@enduml

```
### Описание классов:

1. **Person (Абстрактный класс "Человек")**:
   Абстрактный класс, представляющий общие характеристики для всех людей, такие как имя. Включает абстрактный метод `Authenticate()`, который должен быть реализован в наследующих классах для аутентификации.

2. **Client (Клиент)**:
   Класс, наследующийся от `Person`. Хранит данные о клиенте банка, такие как его уникальный идентификатор (Id), номер карты (PAN) и баланс. Класс предоставляет методы для пополнения (DepositCash()) и снятия средств (WithdrawCash()). Также реализует метод `Authenticate()`, который используется для аутентификации клиента.

3. **IBank (Интерфейс "Банк")**:
   Интерфейс, определяющий общие методы для взаимодействия с банками, такие как:
   - `AuthorizeClient(client: Client)`: авторизация клиента.
   - `GetClientByPAN(pan: string)`: поиск клиента по номеру карты.
   - `TransferFunds(fromClient: Client, toClient: Client, amount: float)`: перевод средств между клиентами.

4. **Bank (Старый банк)**:
   Класс, реализующий интерфейс `IBank`. Хранит список клиентов и название банка. Предоставляет методы для добавления клиента (`AddClient()`), поиска клиента по номеру карты (`GetClientByPAN()`), авторизации клиента (`AuthorizeClient()`), а также перевода средств между клиентами (`TransferFunds()`).

5. **BankAdapter (Адаптер для старого банка)**:
   Класс, реализующий интерфейс `IBank`. Адаптирует работу старого банка для взаимодействия с банкоматами, используя методы `AuthorizeClient()`, `GetClientByPAN()` и `TransferFunds()`.

6. **NewBank (Новый банк)**:
   Класс, представляющий новый банк с использованием другой структуры хранения клиентов (словарь). Предоставляет методы для добавления клиентов (`AddClient()`), проверки клиента по номеру карты (`ValidateClientPAN()`), получения клиента по номеру карты (`FetchClientByPAN()`), а также для перевода средств между клиентами (`PerformTransfer()`).

7. **NewBankAdapter (Адаптер для нового банка)**:
   Класс, реализующий интерфейс `IBank`, адаптирует работу нового банка для взаимодействия с банкоматами. Использует методы нового банка для выполнения операций, таких как `AuthorizeClient()`, `GetClientByPAN()` и `TransferFunds()`.

8. **ATM (Банкомат)**:
   Класс, представляющий банкомат, который работает с банками через интерфейс `IBank`. Предоставляет методы для:
   - Вставки карты клиента (`InsertCard()`),
   - Выполнения снятия средств (`PerformWithdrawal()`),
   - Выполнения пополнения счета (`PerformDeposit()`),
   - Перевода средств между клиентами (`TransferFunds()`).

9. **Program (Главная программа)**:
   Класс с методом `Main()`, который является точкой входа в программу. Создает объекты для старого банка, нового банка и банкоматов, а затем симулирует операции, такие как авторизация клиентов, пополнение и снятие средств, переводы и т.д.

### Связи между классами:

- **Person <|-- Client**:
  Класс `Client` наследуется от абстрактного класса `Person`. Таким образом, `Client` является конкретной реализацией класса `Person`, добавляя методы для работы с банковскими операциями.

- **IBank <|.. Bank**:
  Класс `Bank` реализует интерфейс `IBank`. Это означает, что `Bank` должен предоставить реализацию всех методов, указанных в интерфейсе, таких как авторизация, поиск клиента и переводы средств.

- **IBank <|.. BankAdapter**:
  Класс `BankAdapter` реализует интерфейс `IBank` и адаптирует старый банк, чтобы он мог взаимодействовать с банкоматами, используя методы старого банка.

- **IBank <|.. NewBankAdapter**:
  Класс `NewBankAdapter` реализует интерфейс `IBank` и адаптирует новый банк, чтобы он мог взаимодействовать с банкоматами, используя методы нового банка.

- **ATM <-- IBankAdapter**:
  Банкомат (`ATM`) использует интерфейс `IBankAdapter` для взаимодействия с банком. Это позволяет банкомату работать с разными банками, используя соответствующие адаптеры для старого или нового банка.

- **Client <-- ATM**:
  Банкомат работает с клиентом. Когда клиент вставляет карту в банкомат, он авторизуется через методы адаптера банка, и банкомат использует информацию о клиенте для выполнения операций.

- **IBank <-- BankAdapter / NewBankAdapter**:
  Адаптеры (`BankAdapter` и `NewBankAdapter`) используют методы старого и нового банка для выполнения операций, таких как авторизация, поиск клиента и переводы средств.

- **Program --> ATM**:
  Класс `Program` создает объект банкомата (`ATM`) и инициирует операции, такие как вставка карты и выполнение переводов между клиентами.
